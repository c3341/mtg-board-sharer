# アーキテクチャ

このドキュメントは、MTG盤面共有アプリケーションの技術的な設計思想を定義します。

## システム概要

アプリケーションはクライアントサーバーモデルを採用します。

- **クライアント (フロントエンド):** ユーザーのブラウザで動作するReactベースのシングルページアプリケーション（SPA）。すべてのUI描画とユーザー操作を処理します。
- **サーバー (バックエンド):** 盤面データの保存と取得を担当するPythonベースのAPIサーバー。
- **外部サービス:** MTGのカードデータを取得するためにScryfall APIを利用します。

```
+-----------------+      +----------------------+
|  ユーザーブラウザ   |      |    Scryfall API      |
|  (Reactクライアント) |      |   (カードデータ用)   |
+-------+---------+      +-----------^----------+
        |                            |
        | (API通信: HTTP/JSON)       | (カード検索)
        v                            |
+-------+---------+      +-----------+----------+
| Pythonバックエンド |----->|      データベース      |
|    (FastAPI)    |      | (SQLiteなどを想定)   |
+-----------------+      +----------------------+
```

## フロントエンド

- **フレームワーク:** React
- **選定理由:** ドラッグ＆ドロップやリアルタイムの盤面更新など、リッチでインタラクティブなUI構築に不可欠なため。
- **責務:**
    - ゲーム盤、ゾーン、カードの描画。
    - ユーザー入力（検索、クリック、ドラッグ＆ドロップ）の処理。
    - 盤面保存/読込のためのバックエンドAPIとの通信。
    - Scryfall APIからのカードデータ取得。

## バックエンド

- **フレームワーク:** Python (FastAPI)
- **選定理由:** 開発者の既存のPython経験を活かすため。FastAPIは学習が容易で高性能な最新のAPIフレームワークです。
- **責務:**
    - 盤面データを `POST` (保存) / `GET` (取得) するためのAPIエンドポイントを提供。
    - データを永続化するためのデータベースとの連携。

## データベース

- **技術:** 未定 (TBD)
- **目的:** 共有される盤面のデータを保存するため。各データは共有URLに使われる一意のIDと紐づけられます。シンプルなファイルベースのデータベース(SQLite)から始めるのが良いでしょう。
